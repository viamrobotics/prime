{"version":3,"file":"code-snippet-677e1d44.js","sources":["../../src/elements/code-snippet.svelte"],"sourcesContent":["<svelte:options immutable tag=\"v-code-snippet\" />\n\n<script context=\"module\" lang=\"ts\">\nconst loadedLanguages: Record<string, boolean> = {};\n</script>\n\n<script lang=\"ts\">\nimport { addStyles } from '../lib';\nimport pkg from '../../package.json';\n\nimport { dispatcher } from '../lib/dispatch';\n\nexport let language: string;\nexport let code: string;\nexport let theme: 'vs' | 'vsc-dark-plus' = 'vs';\nexport let showbutton = 'true';\n\nconst dispatch = dispatcher();\n\nlet element: HTMLElement;\n\naddStyles();\n\nconst version = pkg.devDependencies.prismjs.replace('^', '');\n\nconst cdn = (src: string) =>\n  `https://cdnjs.cloudflare.com/ajax/libs/prism/${version}/${src}`;\n\nconst script = (src: string) =>\n  new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    script.async = true;\n    script.src = src;\n    script.addEventListener('load', resolve);\n    script.addEventListener('error', reject);\n    document.head.append(script);\n  });\n\nconst copyToClipboard = async () => {\n  try {\n    await navigator.clipboard.writeText(code);\n    dispatch('copy', { value: 'Successfully copied snippet to the clipboard' });\n  } catch {\n    dispatch('copy', { value: ':( Failed to copy snippet to the clipboard' });\n  }\n};\n\nconst highlight = async (element: Element) => {\n  const { Prism } = window as { Prism: typeof import('prismjs') };\n\n  if (!Prism) {\n    await script(cdn('prism.min.js'));\n  }\n\n  if (!loadedLanguages[language]) {\n    await script(cdn(`components/prism-${language}.min.js`));\n    // eslint-disable-next-line require-atomic-updates\n    loadedLanguages[language] = true;\n  }\n\n  if (element !== undefined) {\n    window.Prism.highlightElement(element);\n  }\n};\n\n$: void highlight(element);\n</script>\n\n<pre\n  class=\"relative !border-none !m-0 !pr-24 !pb-0\n    {theme === 'vsc-dark-plus' ? '!bg-gray-9' : '!bg-light'} \"><code\n    bind:this={element}\n    class=\"language-{language} font-mono\">{code}</code\n  >\n  {#if showbutton === 'true'}\n    <v-button\n      class=\"absolute top-2 right-2 !text-black !font-sans\"\n      on:click={copyToClipboard}\n      on:keyup={copyToClipboard}\n      label=\"Copy\"\n      icon=\"copy\"\n    />\n  {/if}\n</pre>\n\n<link\n  rel=\"stylesheet\"\n  crossorigin=\"anonymous\"\n  referrerpolicy=\"no-referrer\"\n  href=\"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-{theme}.min.css\"\n/>\n"],"names":["insert","target","v_button","anchor","ctx","if_block","create_if_block","attr","pre","pre_class_value","append","code_1","link","dirty","loadedLanguages","language","$$props","code","theme","showbutton","dispatch","dispatcher","element","addStyles","version","pkg","cdn","src","script","resolve","reject","copyToClipboard","highlight","Prism","$$value"],"mappings":"6pGA2EIA,EAMCC,EAAAC,EAAAC,CAAA,qBAJWC,EAAe,CAAA,CAAA,cACfA,EAAe,CAAA,CAAA,8EAJxBC,EAAAD,OAAe,QAAME,EAAAF,CAAA,wCAFeA,EAAI,CAAA,CAAA,MAC7C;AAAA,GACA,eAQI;AAAA,CACN,uDAXqBA,EAAQ,CAAA,EAAA,YAAA,EAFxBG,EAAAC,EAAA,QAAAC,EAAA,4CAAAL,OAAU,gBAAkB,aAAe,YAAW,6KAmBcA,EAAK,CAAA,EAAA,UAAA,UArB9EJ,EAeKC,EAAAO,EAAAL,CAAA,EAb0DO,EAG7DF,EAAAG,CAAA,uDAYFX,EAKCC,EAAAW,EAAAT,CAAA,qBAlB0CC,EAAI,CAAA,CAAA,0BAA1BA,EAAQ,CAAA,EAAA,8BAEtBA,OAAe,6DAJjBS,EAAA,GAAAJ,KAAAA,EAAA,4CAAAL,OAAU,gBAAkB,aAAe,6GAmByBA,EAAK,CAAA,EAAA,6FAtFxEU,EAAe,CAAA,yBASV,SAAAC,CAAgB,EAAAC,GAChB,KAAAC,CAAY,EAAAD,EACZ,CAAA,MAAAE,EAAgC,IAAI,EAAAF,EACpC,CAAA,WAAAG,EAAa,MAAM,EAAAH,EAExB,MAAAI,EAAWC,QAEbC,EAEJC,UAEMC,EAAUC,GAAI,gBAAgB,QAAQ,QAAQ,IAAK,EAAE,EAErDC,EAAOC,GACqC,gDAAAH,KAAWG,IAEvDC,EAAUD,GAAW,IACrB,QAAS,CAAAE,EAASC,IAAM,CACpB,MAAAF,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQ,GACfA,EAAO,IAAMD,EACbC,EAAO,iBAAiB,OAAQC,CAAO,EACvCD,EAAO,iBAAiB,QAASE,CAAM,EACvC,SAAS,KAAK,OAAOF,CAAM,IAGzBG,EAAe,SAAA,KAEX,MAAA,UAAU,UAAU,UAAUd,CAAI,EACxCG,EAAS,OAAM,CAAI,MAAO,uDAE1BA,EAAS,OAAM,CAAI,MAAO,iDAIxBY,QAAmBV,GAAgB,CAC/B,KAAA,CAAA,MAAAW,GAAU,OAEbA,SACGL,EAAOF,EAAI,cAAc,CAAA,EAG5BZ,EAAgBC,CAAQ,UACrBa,EAAOF,EAAG,oBAAqBX,UAAQ,CAAA,EAE7CD,EAAgBC,CAAQ,EAAI,IAG1BO,IAAY,QACd,OAAO,MAAM,iBAAiBA,CAAO,4CAU1BA,EAAOY,6LANdF,EAAUV,CAAO"}